<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="dismiss()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ keyval.key }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div *ngIf="keyval.value.type === 'list'">

    <div *ngIf="keyval.value.spec.type !== 'enum'">

      <ion-item-group>
        <ion-item-divider>
          {{ value.length }}&nbsp;
          <span *ngIf="value.length === 1">Entry</span>
          <span *ngIf="value.length !== 1">Entries</span>
          <span *ngIf="min">&nbsp;(min: {{ min }})</span>
          <span *ngIf="max">&nbsp;(max: {{ max }})</span>
        </ion-item-divider>

        <div *ngFor="let entry of value; let i = index">
          <ion-item-sliding *ngIf="keyval.value.spec.type === 'string'">
            <ion-item-options side="end">
              <ion-item-option color="danger" (click)="deleteEntry(i)">
                <ion-icon slot="icon-only" name="trash"></ion-icon>
              </ion-item-option>
            </ion-item-options>
            <ion-item button detail="false" (click)="presentAlertConfigValueEdit(i)">
              <ion-label>{{ entry }}</ion-label>
            </ion-item>
          </ion-item-sliding>
          <ion-item-sliding *ngIf="keyval.value.spec.type === 'object'">
            <ion-item-options side="end">
              <ion-item-option color="danger" (click)="deleteEntry(i)">Delete</ion-item-option>
            </ion-item-options>
            <ion-item button detail="false" (click)="presentModalConfig(i, keyval.value.spec)">
              <ion-label>{{ keyval.key }} {{ i + 1 }}</ion-label>
              <ion-note slot="end">complex</ion-note>
              <ion-icon slot="end" name="arrow-forward"></ion-icon>
            </ion-item>
          </ion-item-sliding>
        </div>
      </ion-item-group>

      <ion-fab vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="addEntry()" class="fab-button">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </div>

    <ion-item-group *ngIf="keyval.value.spec.type === 'enum'">
      <ion-item-divider>
        {{ value.length }} selected
        <span *ngIf="min">&nbsp;(min: {{ min }})</span>
        <span *ngIf="max">&nbsp;(max: {{ max }})</span>
      </ion-item-divider>
      <ion-item *ngFor="let option of keyval.value.spec.values">
        <ion-label>{{ option }}</ion-label>
        <ion-checkbox slot="end" [checked]="value.includes(option)" (ionChange)="handleEnumChange(option)"></ion-checkbox>
      </ion-item>
    </ion-item-group>
  </div>

  <ion-item-group *ngIf="keyval.value.type === 'object'">
    <object-config [spec]="keyval.value.spec" [(edited)]="edited" [config]="value"></object-config>
  </ion-item-group>

</ion-content>
